+------------------------+         +--------------------+
|   MaterialController   | ----->  |   MaterialService  |
+------------------------+         +--------------------+
| +recommend()           |         | +recommend(...)    |
| +explain()             |         | +explain(...)      |
+-----------+------------+         +---------+----------+
                                   | uses MaterialRecommendationTask
                                   | uses MaterialExplanationTask
                                   +-------------------------------+

+----------------------+           +------------------+
|   HintController     | --------> |   HintService    |
+----------------------+           +------------------+
| +generateHint()      |           | +hint(...)       |
+-----------+----------+           +--------+---------+
                                    | uses HintGenerationTask
                                    +--------------------------+

+--------------------------------+        +---------------------------+
| FeedbackGenerationController   | -----> |   FeedbackService         |
+--------------------------------+        +---------------------------+
| +generateFeedback()            |        | +feedback(...)            |
| +history(studentId)            |        | +getHistory(...)          |
| +byAssessment(stu,aId)         |        | +getByAssessment(...)     |
+-----------------------+--------+        +-------------+-------------+
                        |                           |
                        |                           |
                        v                           v
      +--------------------------------+      +----------------------------+
      |   FeedbackHistoryService       |      |  StudentProfileService     |
      +--------------------------------+      +----------------------------+
      | +getHistory(studentId)         |      | +updateProfile(...)        |
      | +getByAssessment(stu,aId)      |      +--------------+-------------+
      +----------------------+---------+                     |
                             |                               |
                             v                               v
              +----------------------------+      +----------------------------+
              |   FeedbackHistoryRepo      |      |  StudentProfileRepository |
              +----------------------------+      +----------------------------+
              | +findByStudentId(...)      |      | +findByStudentId(...)     |
              | +findByStuIdAndAsmId(...)  |      | +save(profile)            |
              +----------------------------+      +----------------------------+


                   AI Task Layer (Logic)
                   ----------------------

<<interface>> AITask
+-------------------------------+
| +execute(AIRequest):AIResp    |
+-------------------------------+

+----------------------------------------+
| MaterialRecommendationTask             |
+----------------------------------------+
| +execute()                             |
+----------------------------------------+

+----------------------------------------+
| MaterialExplanationTask                |
+----------------------------------------+
| +execute()                             |
+----------------------------------------+

+----------------------------------------+
| HintGenerationTask                     |
+----------------------------------------+
| +execute()                             |
+----------------------------------------+

+----------------------------------------+
| FeedbackGenerationTask                 |
+----------------------------------------+
| +execute()                             |
+----------------------------------------+


             Feedback Post-Processing Layer
             ----------------------------------

+-----------------------------+
|     FeedbackProcessor       |
+-----------------------------+
| +extractInsights(text)      |
+-----------------------------+


                  LLM Abstraction Layer (DIP)
                  ----------------------------

<<interface>> LLMClient
+-------------------------+
| +chat(prompt):String    |
+-------------------------+

+------------------------------+
|     OpenAIClientImpl         |
+------------------------------+
| +chat(prompt)                |
+------------------------------+


                   Data Models (Entities + DTOs)
                   --------------------------------

+-------------------+
|   AIRequest       |
+-------------------+
| -type             |
| -userInput        |
| -contextData      |
| -questionList     |
+-------------------+

+-------------------+
|   AIResponse      |
+-------------------+
| -result           |
| -metadata         |
+-------------------+

+-------------------------------+
|    FeedbackRecord (Entity)    |
+-------------------------------+
| -id                           |
| -studentId                    |
| -courseId                     |
| -assessmentId                 |
| -feedbackText                 |
| -strengths                    |
| -weaknesses                   |
| -recommendedNextTopics        |
| -createdAt                    |
+-------------------------------+

+-------------------------------+
|    StudentProfile (Entity)    |
+-------------------------------+
| -studentId                    |
| -skillMasteryMap              |
| -weaknessAreas                |
| -recommendedLearningPath      |
+-------------------------------+

+----------------------------+
|   FeedbackInsights (DTO)   |
+----------------------------+
| -skillsImproved            |
| -weakPoints                |
| -suggestedResources        |
+----------------------------+
